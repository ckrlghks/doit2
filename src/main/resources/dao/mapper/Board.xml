<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.mapper.BoardMapper">
   <select id="count" parameterType="map" resultType="int">
      select count(*) from board
      <if test="column!=null and find!=null">
      	where ${column} like '%${find}%'
      </if>
   </select>
   
   <select id="list" parameterType="map" resultType="Board">
      select num, name, pass, subject, content, file1 fileurl, regdate, readcnt, ref, reflevel, refstep from board
      <choose>
         <when test="num != null">
            where num = #{num}
         </when>
         <when test="column!=null and find!=null">
         	where ${column} like '%${find}%'
         </when>
         <otherwise>
            order by ref desc, refstep asc limit #{startrow}, #{limit}         
         </otherwise>
      </choose>
   </select>
</mapper>